<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesan Kelas - UG Room</title>
    <link rel="icon" href="../assets/images/Logo-Gunadarma-Universitas-Gunadarma-Original-PNG-1140x1175 1.png" type="image/png">
    
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800&display=swap" rel="stylesheet">
    
    <style>
        .empty-state-message {
            display: none;
            text-align: center;
            width: 100%;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
        }
        .empty-state-icon { font-size: 4rem; color: #ddd; margin-bottom: 15px; }
        .empty-state-text { color: #fff; font-weight: 600; font-size: 1.2rem; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
    </style>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>

    <nav class="navbar">
        <div class="container nav-container">
            <a href="../index.html" class="nav-brand">
                <img src="../assets/images/Logo gundar untuk navigation bar.png" alt="Logo Gunadarma">
            </a>

            <ul class="nav-menu">
                <li><a href="../index.html">Beranda</a></li>
                <li><a href="pesan-kelas.html" class="active" style="color: var(--primary-color);">Pesan Kelas</a></li>
                <li><a href="info-kelas.html">Info Kelas</a></li>
                <li><a href="jadwal-kuliah.html">Jadwal Kuliah</a></li>
                <li><a href="bantuan.html">Bantuan</a></li>
            </ul>

            <div style="display: flex; align-items: center;">
                <div class="nav-search">
                    <i class="fas fa-search" style="cursor: pointer;" onclick="handleGlobalSearch()"></i>
                    <input type="text" id="globalSearchInput" placeholder="Cari Kelas..." onkeypress="if(event.key === 'Enter') handleGlobalSearch()">
                </div>
                <a href="login.html" class="btn-login" id="authBtn">
                    Login <i class="fas fa-sign-in-alt"></i> 
                </a>
            </div>
        </div>
    </nav>

    <section class="booking-section">
        
        <div id="emptyState" class="empty-state-message">
            <i class="fas fa-search empty-state-icon"></i>
            <p class="empty-state-text">Kelas tidak ditemukan, silahkan cari kelas yang lain.</p>
        </div>

        <div class="cards-scroll-container" id="listView">
        </div>

        <div class="filter-bar" id="filterBar">
            
            <div class="filter-group">
                <label class="filter-label">Region</label>
                <div class="custom-dropdown">
                    <input type="text" class="dropdown-input" placeholder="Pilih/Ketik Region" 
                           id="inputRegion" onkeyup="filterFunction('inputRegion', 'listRegion')" onclick="toggleDropdown('listRegion')">
                    <i class="fas fa-chevron-up dropdown-icon-arrow"></i>
                    
                    <div id="listRegion" class="dropdown-list">
                        <div class="dropdown-item" onclick="selectOption('inputRegion', 'listRegion', '')">Semua Region</div>
                        <div class="dropdown-item" onclick="selectOption('inputRegion', 'listRegion', 'Depok')">Depok</div>
                        <div class="dropdown-item" onclick="selectOption('inputRegion', 'listRegion', 'Karawaci')">Karawaci</div>
                        <div class="dropdown-item" onclick="selectOption('inputRegion', 'listRegion', 'Kalimalang')">Kalimalang</div>
                        <div class="dropdown-item" onclick="selectOption('inputRegion', 'listRegion', 'Cengkareng')">Cengkareng</div>
                        <div class="dropdown-item" onclick="selectOption('inputRegion', 'listRegion', 'Simatupang')">Simatupang</div>
                    </div>
                </div>
            </div>

            <div class="filter-group">
                <label class="filter-label">Tipe Kelas</label>
                <div class="custom-dropdown">
                    <input type="text" class="dropdown-input" placeholder="Pilih/Ketik Tipe" 
                           id="inputTipe" onkeyup="filterFunction('inputTipe', 'listTipe')" onclick="toggleDropdown('listTipe')">
                    <i class="fas fa-chevron-up dropdown-icon-arrow"></i>
                    
                    <div id="listTipe" class="dropdown-list">
                        <div class="dropdown-item" onclick="selectOption('inputTipe', 'listTipe', '')">Semua Tipe</div>
                        <div class="dropdown-item" onclick="selectOption('inputTipe', 'listTipe', 'Mengajar')">Kelas Mengajar</div>
                        <div class="dropdown-item" onclick="selectOption('inputTipe', 'listTipe', 'Praktikum')">Kelas Praktikum</div>
                        <div class="dropdown-item" onclick="selectOption('inputTipe', 'listTipe', 'Laboratorium')">Laboratorium</div>
                        <div class="dropdown-item" onclick="selectOption('inputTipe', 'listTipe', 'Auditorium')">Auditorium</div>
                    </div>
                </div>
            </div>

            <div class="filter-group">
                <label class="filter-label">Waktu</label>
                <div class="custom-dropdown">
                    <input type="text" class="dropdown-input" placeholder="Pilih/Ketik Waktu" 
                           id="inputWaktu" onkeyup="filterFunction('inputWaktu', 'listWaktu')" onclick="toggleDropdown('listWaktu')">
                    <i class="fas fa-chevron-up dropdown-icon-arrow"></i>
                    
                    <div id="listWaktu" class="dropdown-list">
                        <div class="dropdown-item" onclick="selectOption('inputWaktu', 'listWaktu', '')">Semua Waktu</div>
                        <div class="dropdown-item" onclick="selectOption('inputWaktu', 'listWaktu', 'Pagi')">Pagi (07.30 - 11.30)</div>
                        <div class="dropdown-item" onclick="selectOption('inputWaktu', 'listWaktu', 'Siang')">Siang (12.30 - 15.30)</div>
                        <div class="dropdown-item" onclick="selectOption('inputWaktu', 'listWaktu', 'Sore')">Sore (15.30 - 18.30)</div>
                    </div>
                </div>
            </div>

            <button class="btn-filter-purple" onclick="applyCustomFilter()">
                Gunakan Filter
            </button>
        </div>

        <div class="booking-detail-view" id="detailView">
            <div class="detail-card">
                <button class="btn-back" onclick="closeDetail()">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <div class="detail-image-side">
                    <img src="../assets/images/biaya-masuk-universitas-gunadarma-3-1024x576.jpg" alt="Room Detail" class="detail-room-img">
                </div>

                <div class="detail-info-side">
                    <div class="detail-header">
                        <h2 class="detail-title">Reservasi Ruang Praktikum</h2>
                        <span class="status-badge available">Tersedia</span>
                    </div>

                    <div class="info-list">
                        <div class="info-item">
                            <img src="../assets/images/tdesign_location-filled.png" class="info-icon">
                            <span>Kampus K - Kelapa Dua, Karawaci</span>
                        </div>
                        <div class="info-item">
                            <img src="../assets/images/tabler_map-code.png" class="info-icon">
                            <span>Kode Kelas - <strong>K132</strong></span>
                        </div>
                        <div class="info-item">
                            <img src="../assets/images/f7_person-2-fill.png" class="info-icon">
                            <span>38 Orang</span>
                        </div>
                    </div>

                    <div class="facilities-section">
                        <span class="facilities-label">Fasilitas :</span>
                        <div class="facilities-grid">
                            <div class="facility-item">
                                <img src="../assets/images/mingcute_black-board-line.png" class="facility-icon">
                                <span class="facility-name">Whiteboard</span>
                                <span class="facility-desc">Papan tulis + Spidol</span>
                            </div>
                            <div class="facility-item">
                                <img src="../assets/images/carbon_screen.png" class="facility-icon">
                                <span class="facility-name">Proyektor</span>
                                <span class="facility-desc">+ HDMI Cable</span>
                            </div>
                            <div class="facility-item">
                                <img src="../assets/images/material-symbols_mic-outline.png" class="facility-icon">
                                <span class="facility-name">Speaker</span>
                                <span class="facility-desc">+ Aux Cable</span>
                            </div>
                            <div class="facility-item">
                                <img src="../assets/images/material-symbols_videocam-outline.png" class="facility-icon">
                                <span class="facility-name">Webcam</span>
                                <span class="facility-desc">HD Quality</span>
                            </div>
                        </div>
                    </div>

                    <form id="bookingForm" onsubmit="handleBooking(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Tanggal Pemesanan</label>
                                <input type="date" class="form-input" id="inputDate" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Waktu Mulai</label>
                                <input type="time" class="form-input" id="inputStart" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Waktu Selesai</label>
                                <input type="time" class="form-input" id="inputEnd" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Tujuan Pemakaian</label>
                            <textarea class="form-textarea" id="inputPurpose" placeholder="Contoh: Kuliah Pengganti PBO, Sidang Proposal, dll." rows="3" required></textarea>
                        </div>

                        <button type="submit" class="btn-reservasi">
                            <i class="fas fa-paper-plane"></i> Ajukan Reservasi
                        </button>
                    </form>

                    <div class="warning-box">
                        <strong>Perhatian!</strong>
                        Perhatikan waktu awal dan akhir pemesanan kelas. dan jika kelas sudah di reservasi maka tidak dapat dibatalkan!
                    </div>
                </div>
            </div>
        </div>

    </section>

    <button class="chat-trigger-btn" id="chatTrigger" onclick="openHelpdesk()">
        <i class="fas fa-comment-dots"></i>
    </button>

    <div class="helpdesk-widget" id="helpdeskWidget">
        <div class="widget-content-scroll">
            <div id="viewHome">
                <div class="header-home">
                    <button class="btn-header-action" onclick="closeHelpdesk()" style="position: absolute; right: 20px; top: 20px;">
                        <i class="fas fa-times"></i>
                    </button>
                    <h3 class="dash-title">Helpdesk UG ROOM</h3>
                    <p class="dash-subtitle">Waktu Operasional Senin, Rabu, Kamis, dan Jumat (05.00-14.00 WIB)</p>
                </div>
                <div class="home-overlap-container">
                    <div class="card-new-chat" onclick="goToChatRoom()">
                        <div class="card-text">
                            <h4>Percakapan Baru</h4>
                            <p>Membalas dalam beberapa menit</p>
                        </div>
                        <i class="fas fa-paper-plane icon-send-purple"></i>
                    </div>
                </div>
            </div>
            <div id="viewHistory" style="display: none;">
                <div class="header-history">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button class="btn-header-action" onclick="switchTab('home')"><i class="fas fa-chevron-left"></i></button>
                        <span>Percakapan</span>
                    </div>
                    <button class="btn-header-action" onclick="closeHelpdesk()"><i class="fas fa-times"></i></button>
                </div>
                <div class="history-container">
                    <span class="label-section">Mulai percakapan baru</span>
                    <div class="card-new-chat" onclick="goToChatRoom()">
                        <div class="card-text">
                            <h4>Percakapan Baru</h4>
                            <p>Membalas dalam beberapa menit</p>
                        </div>
                        <i class="fas fa-paper-plane icon-send-purple"></i>
                    </div>
                    <span class="label-section">Terbaru</span>
                    <div class="history-item" onclick="goToChatRoom()">
                        <div class="history-item-top">
                            <span class="history-role">Helpdesk UG ROOM</span>
                            <span class="history-time">sekarang</span>
                        </div>
                        <div class="history-preview">
                            <span>Selamat datang di layanan UG...</span>
                            <i class="fas fa-chevron-right icon-arrow-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="widget-footer" id="mainFooter">
            <button class="nav-btn active" id="btnHome" onclick="switchTab('home')"><i class="fas fa-home"></i></button>
            <button class="nav-btn" id="btnHistory" onclick="switchTab('history')"><i class="far fa-comment-alt"></i></button>
        </div>
        <div class="screen-chat-room" id="viewChatRoom">
            <div class="room-header">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-robot"></i> <strong>UG Room Assistant</strong>
                </div>
                <button class="btn-header-action" onclick="closeHelpdesk()"><i class="fas fa-times"></i></button>
            </div>
            <div class="room-body">
                <div class="bubble-bot">Halo! ðŸ‘‹ Ada yang bisa saya bantu?</div>
            </div>
            <div class="room-footer">
                <input type="text" class="input-chat" placeholder="Ketik pesan...">
                <button class="btn-chat-send"><i class="fas fa-paper-plane"></i></button>
            </div>
            <div style="text-align: center; padding: 10px;">
                <span style="font-size: 0.8rem; color: #999; cursor: pointer; text-decoration: underline;" onclick="exitChatRoom()">Kembali</span>
            </div>
        </div>
    </div>

    <script src="../script.js"></script>

</body>
</html>